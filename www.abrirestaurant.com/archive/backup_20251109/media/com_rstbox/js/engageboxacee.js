if(jQuery(function(e){function t(){var e=[-(o("padding-top")+o("margin-top")+o("border-top-width")),-(o("padding-right")+o("margin-right")+o("border-right-width")),0,-(o("padding-left")+o("margin-left")+o("border-left-width"))];return e.join("px ")+"px"}function o(t){return body=parseInt(e("body").css(t)||0),html=parseInt(e("html").css(t)||0),body+html}e(document).on("ebox:OnAfterInit",function(){$mats=e(".rstboxes .welcomemat"),$mats.length&&($mats.each(function(t,o){$mat=e(o),$mat.css({height:$mat.css("height")}),$mat.bind("beforeOpen",function(){window.scrollTo(0,0)}),$mat.bind("afterOpen",function(){e("html").addClass("eboxWelcomeMat")}).bind("afterClose",function(){e("html").removeClass("eboxWelcomeMat")})}),e("<div>").addClass("rstboxes eboxWelcomeMats").prependTo("body").css({margin:t()}),$mats.appendTo(e("body .eboxWelcomeMats")))})}),"undefined"==typeof rstbox)var rstbox={};"undefined"==typeof rstbox.jQuery&&(rstbox.jQuery=jQuery.noConflict()),function(e){e(document).ready(function(){function t(e){e&&u&&(console=window.console||{log:function(){}},console.log(c+" "+e))}function o(e,t,o){if(t&&(obj=e.data("settings"),obj)){for(var n=t.split(".");n.length&&(obj=obj[n.shift()]););return"undefined"==typeof obj&&"undefined"!=typeof o?o:obj}}function n(e){if(e){var o=location.hash.replace("#","");return o!=e.replace("#","")?void t("hashtags does not match"):(t("hashtags match"),!0)}}function i(e,t,o){var n="";if("session"!=t){var i,r=new Date,a=r.getTime();switch(t){case"days":i=24*o*60*60;break;case"hours":i=60*o*60;break;case"minutes":i=60*o;break;case"seconds":i=o;break;case"ever":i=31536e4;break;case"remove":i=-1}r.setTime(a+1e3*i);var n="; expires="+r.toGMTString()}document.cookie=d+e+"=true"+n+"; path=/"}function r(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function a(e){for(var t=d+e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function s(e,n){var i=e.attr("id"),i=i.replace("rstbox_","");if(void 0===e)return void t("Box "+i+" is not present in the current page.");if(e.is(":animated")||e.hasClass("velocity-animating"))return!1;if(n&&e.is(":visible"))return void t("Box "+i+" is already opened");if(!n&&e.is(":hidden"))return void t("Box "+i+" is already closed");t("Box "+i+" is going to "+(n?"open":"close")+"!");var r=o(e,"transitionin","fadeIn"),a=o(e,"transitionout","fadeOut"),s=n?r:a,c=n?o(e,"delay",0):0,l=o(e,"duration","400");return e.velocity(s,{delay:c,duration:l,begin:function(t){e.trigger(n?"beforeOpen":"beforeClose"),n&&s.indexOf("callout.")>-1&&e.css({display:"block",opacity:"1"})},complete:function(t){e.trigger(n?"afterOpen":"afterClose")}}),n}var c="[RSTBox]",l=e(".rstboxes").last();if(!l.children().length)return void console.log(c+" Can't find any boxes on this page. Exiting..");var d="rstbox_"+l.data("site")+"_",u=(e(window).height(),e(document).height(),l.data("debug"));e("*[data-ebox], *[data-ebox-cmd]").on("click",function(t){if(boxID=parseInt(e(this).data("ebox")),box=boxID?e(".rstboxes > #rstbox_"+boxID).first():e(this).closest("div.rstbox"),box){switch(e(this).data("ebox-cmd")){case"open":box.trigger("open");break;case"close":box.trigger("close");break;case"closeKeep":box.trigger("closeKeep");break;default:box.is(":visible")?box.trigger("close"):box.trigger("open")}"0"!=e(this).data("ebox-prevent")&&t.preventDefault()}}),e("*[data-rstbox], *[data-rstbox-command], *[data-rstbox-cmd]").on("click",function(t){if(boxID=parseInt(e(this).data("rstbox")),boxID?box=e(".rstboxes > #rstbox_"+boxID).first():box=e(this).closest("div.rstbox"),box){var o=e(this).data("rstbox-cmd");switch("undefined"!=typeof o&&o!==!1?boxCommand=o:boxCommand=e(this).data("rstbox-command"),boxCommand){case"open":box.trigger("open");break;case"close":box.trigger("close");break;case"closeKeep":box.trigger("closeKeep");break;default:box.is(":visible")?box.trigger("close"):box.trigger("open")}"0"!=e(this).data("rstbox-prevent")&&t.preventDefault()}}),l.find("> .rstbox").each(function(){function c(e){s(e,!1),v||(cookieType=e.data("cookietype"),"session"==cookieType&&(i(f,"session"),t("Box "+f+" Session cookie set")),"ever"==cookieType&&(i(f,"ever"),t("Box "+f+" Cookie set for ever")),"seconds"!=cookieType&&"minutes"!=cookieType&&"days"!=cookieType&&"hours"!=cookieType||(cook=parseInt(e.data("cookie")),cook>0&&(i(f,e.data("cookietype"),cook),t("Box "+f+" Cookie set for "+cook+" "+e.data("cookietype")))))}var d=e(this),f=d.attr("id").replace("rstbox_",""),b=0,g=d.data("trigger").split(":")[0],p="pageload"!=g&&d.data("trigger").split(":")[1],x=a(f),v="1"==o(d,"testmode",0);if(d.bind("open",function(){s(d,!0)}),d.bind("close",function(){s(d,!1)}),d.bind("closeKeep",function(){c(d)}),d.bind("setCookie",function(e,t,o){i(f,t,o)}),d.bind("beforeOpen",function(){ovrl=o(d,"overlay"),ovrl&&(overlay=ovrl.split(":"),overlayObject=e("<div/>",{id:"overlay_"+d.attr("id"),class:"rstbox_overlay",css:{"background-color":overlay[0]}}).insertAfter(d),overlayClick=parseInt(overlay[1]),overlayClick&&overlayObject.on("click",function(){d.trigger("closeKeep")}),d.bind("beforeClose",function(){d.next(".rstbox_overlay").remove()}))}),d.bind("beforeOpen",function(){parseInt(o(d,"preventpagescroll",0))&&e("body").addClass("rstbox-prevent-page-scroll")}),d.bind("afterOpen",function(){d.addClass("rstbox_visible"),e("body").addClass(d.attr("id")),t("Box "+f+" opened")}),d.bind("afterClose",function(){d.removeClass("rstbox_visible"),e("body").removeClass(d.attr("id")),e("body").removeClass("rstbox-prevent-page-scroll"),t("Box "+f+" closed")}),v&&t("Box "+f+" is on test mode"),x&&!v)return void t("Box "+f+" is hidden by cookie");if("element"==g){var m=e(p).filter(":first");if(0==m.length)return void t("Box "+f+" Can't find element \""+p+'". Not showing box.');var h="load resize scroll.box"+parseInt(f),y=0!=parseInt(o(d,"autohide",0)),w=function(){a(f)||(b&&clearTimeout(b),b=window.setTimeout(function(){r(m)?(y||e(window).unbind(h,w),s(d,!0)):s(d,!1)},50))};w(),e(window).bind(h,w),d.bind("afterClose",function(){a(f)&&(t("Box "+f+" Unbinding Scroll Check"),e(window).unbind(h,w))})}if("pageheight"==g){var h="load resize scroll.box"+parseInt(f),y=0!=parseInt(o(d,"autohide",0)),k=parseInt(p);t("Box "+f+" is going to be triggered on "+k+"% of page height.");var w=function(){a(f)||(b&&clearTimeout(b),b=window.setTimeout(function(){var o=e(window).scrollTop(),n=e(document).height(),i=e(window).height(),r=o/(n-i)*100;t("Box "+f+" - Scroll Debug: Wintop="+o),t("Box "+f+" - Scroll Debug: Document Height="+n),t("Box "+f+" - Scroll Debug: Window Height="+i),t("Box "+f+" - Scroll Debug: Percentage of scroll="+r+"%"),r>k?(y||e(window).unbind(h,w),d.is(":visible")||s(d,!0)):d.is(":visible")&&y&&s(d,!1)},50))};w(),e(window).bind(h,w),d.bind("afterClose",function(){a(f)&&(t("Box "+f+" Unbinding Scroll Check"),e(window).unbind(h,w))})}if("userleave"==g&&(t("Box "+f+" is going to be triggered on user leave"),e(document).ExitIntent({timer:o(d,"exittimer",1e3),delay:o(d,"exitdelay",0),debug:u,callback:function(){a(f)||s(d,!0)}})),"pageready"==g){if(a(f))return;t("Box "+f+" is going to be triggered at page ready"),s(d,!0)}if("pageload"==g&&e(window).load(function(){a(f)||(t("Box "+f+" is going to be triggered at page load"),s(d,!0))}),"elementHover"==g){var m=e(p),I=o(d,"delay",30);0==m.length?t("Box "+f+" Can't find element \""+p+'". Not showing box.'):(t("Box "+f+" will be trigger at "+p+"hover"),m.on({mouseover:function(){b=setTimeout(function(){a(f)||s(d,!0)},I)},mouseout:function(){clearTimeout(b)}}),d.bind("afterClose",function(){a(f)&&(t("Box "+f+" Unbinding MouseOver & MouseOut events"),m.unbind("mouseover mouseout"))}))}if("onclick"==g){var m=e(o(d,"triggerelement"));0==!m.length&&(m.on("click",function(e){a(f)||(s(d,!0),parseInt(o(d,"triggerpreventdefault","1"))>0&&e.preventDefault())}),t("Box "+f+" will be triggered on click"))}"ondemand"==g&&t("Box "+f+" will be triggered on demand"),n(o(d,"triggerbyhash"))&&s(d,!0);var C=o(d,"autoclose",0);C>0&&(t("Box "+f+" will be auto-closed after "+C+" miliseconds"),d.bind("afterOpen",function(){setTimeout(function(){d.trigger("closeKeep")},C)}));var B=parseInt(o(d,"closeopened",0));B>0&&d.bind("beforeOpen",function(){l.find(".rstbox").trigger("close")})}),e(document).trigger("ebox:OnAfterInit")})}(rstbox.jQuery),function(e,t,o,n){function i(t,o){this.options=e.extend({},a,o);var n=this;setTimeout(function(){n.init()},n.options.timer)}var r="ExitIntent",a={sensitivity:0,timer:1e3,delay:0,aggressive:!1,callback:null,debug:!1},s=!1,c=null;i.prototype.init=function(){var t=(this.options,this);this.log("Init after "+this.options.timer),e(o).on("mouseout.exitintent",function(e){var o=!e.relatedTarget&&!e.toElement&&e.clientY<50;o&&(c=setTimeout(function(){t.fire()},t.options.delay)),t.log("Event: mouseout, Pass: "+o)}),this.options.sensitivity>0&&e(o).on("mousemove.exitintent",function(e){var o=e.clientY<=t.options.sensitivity;o&&(t.log("Event: MouseMove"+e.clientY),c=setTimeout(function(){t.fire()},t.options.delay))}),e(o).on("mouseenter.exitintent",function(e){t.log("Event: mouseenter"),t.cleartimer()})},i.prototype.cleartimer=function(){c&&(this.log("Clearing Timer"),clearTimeout(c),c=null)},i.prototype.fire=function(){s||(this.log("Fire!"+c),"function"==typeof this.options.callback&&this.options.callback.call(this),this.options.aggressive||this.stop())},i.prototype.log=function(e){this.options.debug&&console.log("[Exit Intent] "+e)},i.prototype.stop=function(){this.log("Destroy"),e(o).off("mousemove.exitintent"),e(o).off("mouseout.exitintent"),e(o).off("mouseenter.exitintent"),s=!0},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new i(this,t))})}}(jQuery,window,document),function(e){function o(){return rstboxes=e(".rstboxes").last(),rstboxes.children().length?(s=rstboxes.data("debug"),track=rstboxes.data("tracking"),track&&(t=track.split(":"),t.length)?(c=t[0],l=t[1],d=t[2],"force"==l&&a(function(){return!0}),!0):void 0):void n("No boxes found. Tracking disabled.")}function n(e){s&&(e=u+e,console.log(e))}function i(e,t){r(function(o,i){return value=parseInt(t.attr("id").replace("rstbox_","")),label="Box #"+value+" - "+t.data("title"),msg="GA "+o+":"+(i?"Remote":"Local")+":"+e+":"+value+":"+label,"Classic"==o?(_gaq.push(["_set","hitCallback",function(){n(msg)}]),void _gaq.push(["_trackEvent",d,e,label])):"Universal"==o?void ga("send","event",{eventCategory:d,eventAction:e,eventLabel:label,hitCallback:function(){n(msg)}}):void 0})}function r(e){return void 0!==window._gaq?void e("Classic",0):window.ga&&ga.create?void e("Universal",0):(a(function(){e("Universal",1)}),!1)}function a(e){!function(e,t,o,n,i,r,a){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,r=t.createElement(o),a=t.getElementsByTagName(o)[0],r.async=1,r.src=n,a.parentNode.insertBefore(r,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",c,"auto"),ga("require","displayfeatures"),ga(function(){e()})}var s,c,l,d,u="RSTBox Tracking: ";e(document).ready(function(){return o()?void rstboxes.find("> .rstbox").each(function(){var t=e(this);!function(e){e.bind("afterClose",function(){i("Close",e)}),e.bind("afterOpen",function(){i("Open",e)})}(t)}):void n("Disabled")})}(rstbox.jQuery),function(e){function t(){return i=e(".rstboxes").last(),!(!i||!i.children().length)||void o(s.NO_BOXES_FOUND)}function o(e){i.data("debug")&&console.log(a+e)}function n(t,n){var r={};r.plugin="rstbox",r.task="track",r.box=n,r.event=t,r[i.data("t")]=1,e.ajax({type:"POST",url:i.data("baseurl")+"index.php?option=com_ajax&format=raw",data:r,async:!0,dataType:"json",success:function(e){var t=e.status,n="Event #"+e.eventid+" - Box #"+e.box;o(t?s.SUCCESS+":"+n:s.FAIL+":"+n)},error:function(){o(s.GENERAL_ERROR)}})}var i,r=!0,a="eBox Logging: ",s={NO_BOXES_FOUND:"No boxes found. Abort",SUCCESS:"Success",FAIL:"Fail",GENERAL_ERROR:"General Error - Make sure your browser accepts cookies!",DISABLED:"Is disabled",INITIALIZED:"Plugin initialized successfully"};e(document).ready(function(){t()&&(o(s.INITIALIZED),i.find("> .rstbox").each(function(){return box=e(this),boxID=box.attr("id").replace("rstbox_",""),boxSettings=box.data("settings"),disableLog=0==parseInt(boxSettings.log),testMode=1==parseInt(boxSettings.testmode),!!(r&&testMode||disableLog)||void function(e){box.bind("afterOpen",function(){n(1,e)})}(boxID)}))})}(rstbox.jQuery),function(e){"function"==typeof e.Velocity.RegisterEffect&&(e.Velocity.RegisterEffect("rstbox.slideUpIn",{defaultDuration:450,calls:[[{translateY:"100%",opacity:1},.05],[{translateY:0},.95]]}),e.Velocity.RegisterEffect("rstbox.slideUpOut",{defaultDuration:450,calls:[[{translateY:"100%"},.95],[{opacity:0},.05]]}),e.Velocity.RegisterEffect("rstbox.slideDownIn",{defaultDuration:450,calls:[[{translateY:"-100%",opacity:1},.05],[{translateY:0},.95]]}),e.Velocity.RegisterEffect("rstbox.slideDownOut",{defaultDuration:450,calls:[[{translateY:"-100%"},.95],[{opacity:0},.05]]}),e.Velocity.RegisterEffect("rstbox.slideLeftIn",{defaultDuration:450,calls:[[{translateX:"-100%",opacity:1},.05],[{translateX:0},.95]]}),e.Velocity.RegisterEffect("rstbox.slideLeftOut",{defaultDuration:450,calls:[[{translateX:"-100%"},.95],[{opacity:0},.05]]}),e.Velocity.RegisterEffect("rstbox.slideRightIn",{defaultDuration:450,calls:[[{translateX:"100%",opacity:1},.05],[{translateX:0},.95]]}),e.Velocity.RegisterEffect("rstbox.slideRightOut",{defaultDuration:450,calls:[[{translateX:"100%"},.95],[{opacity:0},.05]]}))}(jQuery);